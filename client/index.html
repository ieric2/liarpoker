<html>

<head>
  <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="/client/index.css">

  <script>
  </script>
</head>


<body>
  <div class="center-screen">
    <h1>WELCOME TO LIARS POKER</h1>
    <br><br>
    <button class="btn btn-primary btn-lg" name=createGameButton onclick="createGame()">Create Game</button>
    <button class="btn btn-primary btn-lg" name="joinGameButton" onclick="joinGame()">Join Game</button>
    <form>
      <input type="text" id="setNameField"/>
      <button type="button" onclick="setName()">Set Name</button>
    </form>
  </div>
  

  <script>

    var cards = {}

    const socket = io();
    const id = socket.id;

    var session_id;
    let data = sessionStorage.getItem('sessionId');
    if (data == null) {
        session_id = null
    } else {
        session_id = data
    }
    socket.emit('startSession', {  sessionId: session_id })


    function joinGame(){
      socket.emit("joinGame");
    }

    function createGame(){
      socket.emit("createGame");
    }
    


    function setName(){
      socket.emit('setName', document.getElementById("setNameField").value);
    }

    function startGame(){
      console.log("starting game");
      socket.emit('startGame');
    }

    socket.on('sessionAck', function(data){
      sessionStorage.setItem('sessionId', data.sessionId);
    })


    socket.on("redirect", function(destination){
      window.location.href = destination;
    })

    

  </script>

