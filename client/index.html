<html>

<head>
  <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>

  <script>
  </script>
</head>


<body>
  <div id="joinScreen"> 
    WELCOME TO LIARS POKER
  <input type="button" name="joinGameButton" value="Join Game" onclick="joinGame()"/>
  <form>
    <input type="text" id="setNameField"/>
    <button type="button" onclick="setName()">Set Name</button>
  </form>
  </div>

  <script>

    var cards = {}

    const socket = io();
    const id = socket.id;

    var session_id;
    let data = sessionStorage.getItem('sessionId');
    if (data == null) {
        session_id = null
    } else {
        session_id = data
    }
    socket.emit('startSession', {  sessionId: session_id })


    function joinGame(){
      socket.emit("joinGame");
    }

    function createGame(){
      socket.emit("createGame");
    }
    


    function setName(){
      socket.emit('setName', document.getElementById("setNameField").value);
    }

    function startGame(){
      console.log("starting game");
      socket.emit('startGame');
    }

    socket.on('sessionAck', function(data){
      sessionStorage.setItem('sessionId', data.sessionId);
    })


    socket.on("redirect", function(destination){
      window.location.href = destination;
    })

    

  </script>

